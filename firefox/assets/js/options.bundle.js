import{E as W,r as d,j as e,c as l,I as x,b as T,s as j,i as F,d as b,m as R,f as E,u as U,B as D,L as V,n as q,e as B,R as G,o as H,p as O,q as $}from"./Loader-DqDKbA-0.chunk.js";import{a as w,K as N,C as M}from"./background.bundle.js";import{H as Y}from"./Header-Dh2SEPye.chunk.js";/* empty css                   */const z=[["edge-chromium",/Edg\/([0-9.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["opera",/Opera\/([0-9.]+)(?:\s|$)/],["opera",/OPR\/([0-9.]+)(:?\s|$)/]];function J(i){return i!==W&&z.reduce((p,[c,u])=>{if(p)return p;const a=u.exec(i);return!!a&&[c,a]},!1)}function X(){const i=J(navigator.userAgent);if(!i)return null;const[p,c]=i;return c[1]&&c[1].split(/[._]/).slice(0,3),p}const Q="_footer_1f4nj_1",Z="_ratingSection_1f4nj_28",ee="_dividerLine_1f4nj_34",te="_left_1f4nj_39",se="_right_1f4nj_42",ne="_ratingLink_1f4nj_46",ae="_starsContainer_1f4nj_53",oe="_starIcon_1f4nj_59",re="_yellow_1f4nj_63",ie="_gray_1f4nj_66",le="_ratingText_1f4nj_71",ce="_linksSection_1f4nj_76",de="_linkItem_1f4nj_84",pe="_narrow_1f4nj_91",me="_wide_1f4nj_94",ge="_linkDivider_1f4nj_98",n={footer:Q,ratingSection:Z,dividerLine:ee,left:te,right:se,ratingLink:ne,starsContainer:ae,starIcon:oe,yellow:re,gray:ie,ratingText:le,linksSection:ce,linkItem:de,narrow:pe,wide:me,linkDivider:ge};function he(){return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:n.footer,children:[e.jsxs("div",{className:n.ratingSection,children:[e.jsx("span",{className:l(n.dividerLine,n.left)}),e.jsxs("a",{href:X()==="firefox"?w.firefox:w.chrome,target:"_blank",rel:"nofollow noopener noreferrer",className:n.ratingLink,children:[e.jsxs("div",{className:n.starsContainer,children:[e.jsx(x,{className:l(n.starIcon,n.yellow),name:"star-yellow"}),e.jsx(x,{className:l(n.starIcon,n.yellow),name:"star-yellow"}),e.jsx(x,{className:l(n.starIcon,n.yellow),name:"star-yellow"}),e.jsx(x,{className:l(n.starIcon,n.yellow),name:"star-yellow"}),e.jsx(x,{className:l(n.starIcon,n.gray),name:"star-white"})]}),e.jsx("p",{className:n.ratingText,children:"Rate on Store"})]}),e.jsx("span",{className:l(n.dividerLine,n.right)})]}),e.jsxs("div",{className:n.linksSection,children:[e.jsx("a",{href:"https://kutt.it",target:"blank",rel:"nofollow noopener noreferrer",className:l(n.linkItem,n.narrow),children:"Kutt.it"}),e.jsx("span",{className:n.linkDivider}),e.jsx("a",{href:"https://git.io/Jn5hS",target:"blank",rel:"nofollow noopener noreferrer",className:l(n.linkItem,n.wide),children:"Report an issue"}),e.jsx("span",{className:n.linkDivider}),e.jsx("a",{href:"https://github.com/thedevs-network/kutt-extension",target:"blank",rel:"nofollow noopener noreferrer",className:l(n.linkItem,n.narrow),children:"GitHub"})]})]})})}const ue=d.memo(he),_e="_formSection_1gm64_1",xe="_inputGroup_1gm64_5",fe="_label_1gm64_11",je="_labelLink_1gm64_16",ye="_inputWrapper_1gm64_24",ve="_inputIconWrapper_1gm64_28",ke="_inputIcon_1gm64_28",Ne="_input_1gm64_5",Se="_inputError_1gm64_74",Ie="_errorText_1gm64_78",be="_validateButton_1gm64_89",we="_validateText_1gm64_118",Te="_validateIcon_1gm64_122",Ee="_toggleSection_1gm64_133",Ce="_toggleLabel_1gm64_139",Le="_toggleText_1gm64_147",Ae="_toggleWrapper_1gm64_151",Ke="_toggleTrack_1gm64_159",Pe="_toggleKnob_1gm64_171",We="_active_1gm64_182",Fe="_toggleInput_1gm64_190",Re="_advancedSection_1gm64_197",Ue="_hidden_1gm64_200",s={formSection:_e,inputGroup:xe,label:fe,labelLink:je,inputWrapper:ye,inputIconWrapper:ve,inputIcon:ke,input:Ne,inputError:Se,errorText:Ie,validateButton:be,validateText:we,validateIcon:Te,toggleSection:Ee,toggleLabel:Ce,toggleText:Le,toggleWrapper:Ae,toggleTrack:Ke,toggleKnob:Pe,active:We,toggleInput:Fe,advancedSection:Re,hidden:Ue},De=i=>b(i);function Ve(){const i=T()[0],[p,c]=d.useState(!1),[u,a]=d.useState(!1),[y,f]=d.useState({error:null,message:""}),[o,_]=d.useState({apikey:i.apikey,history:i.history,advanced:i.advanced,host:i.advanced&&i.host.hostUrl||""}),[k,m]=d.useState({}),[g,h]=d.useState({}),L=(j(g.apikey)||g.apikey)&&o.apikey.trim().length===40&&j(k.apikey)&&((j(g.host)||g.host)&&j(k.host)||!o.advanced)||!1;d.useEffect(()=>{De({...o,...o.advanced===!1&&{host:""}})},[o]);function A(r){_(t=>({...t,apikey:r})),r.trim().length>0?r&&r.trim().length<40?(m(t=>({...t,apikey:"API key must be 40 characters"})),h(t=>({...t,apikey:!1}))):r&&r.trim().length>40?(m(t=>({...t,apikey:"API key cannot exceed 40 characters"})),h(t=>({...t,apikey:!1}))):(m(t=>{const{apikey:S,...v}=t;return v}),h(t=>({...t,apikey:!0}))):(m(t=>({...t,apikey:"API key missing"})),h(t=>({...t,apikey:!1})))}function K(r){if(!o.advanced){m(t=>({...t,host:"Enable Advanced Options first"})),h(t=>({...t,host:!1}));return}if(_(t=>({...t,host:r})),!(r.trim().length>0)){m(t=>({...t,host:"Custom URL cannot be empty"})),h(t=>({...t,host:!1}));return}!E(r.trim())||r.trim().length<10?(m(t=>({...t,host:"Please enter a valid url"})),h(t=>({...t,host:!1}))):(m(t=>{const{host:S,...v}=t;return v}),h(t=>({...t,host:!0})))}async function P(){c(!0);const r={apikey:o.apikey.trim(),hostUrl:o.advanced&&o.host.trim().length>0&&o.host.trim()||N.hostUrl},t=await R.send(M,r);if(t.error)f({error:!0,message:t.message}),await b({user:null});else{f({error:!1,message:"Valid API Key"});const{domains:S,email:v}=t.data;await b({user:{domains:S,email:v}})}c(!1),setTimeout(()=>{f({error:null,message:""})},1e3)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.formSection,children:e.jsxs("div",{className:s.inputGroup,children:[e.jsxs("label",{htmlFor:"apikey",className:s.label,children:["API Key",e.jsx("small",{children:e.jsx("a",{href:`${o.advanced&&o.host||N.hostUrl}/login`,target:"blank",rel:"nofollow noopener noreferrer",className:s.labelLink,children:"get one?"})})]}),e.jsxs("div",{className:s.inputWrapper,children:[e.jsx("div",{className:s.inputIconWrapper,children:e.jsx(x,{className:s.inputIcon,onClick:()=>a(!u),name:u?"eye":"eye-closed"})}),e.jsx("input",{id:"apikey",name:"apikey",type:u?"text":"password",value:o.apikey,onChange:r=>{A(r.target.value.trim())},spellCheck:"false",className:l(s.input,!j(g.apikey)&&!g.apikey&&s.inputError)})]}),e.jsx("span",{className:s.errorText,children:k.apikey})]})}),e.jsx("div",{children:e.jsxs("button",{type:"submit",disabled:p||!L,onClick:P,className:s.validateButton,children:[e.jsx("span",{className:s.validateText,children:"Validate"}),e.jsx(x,{name:p?"spinner":!F(y.error)&&(!y.error&&"tick"||"cross")||"zap",className:s.validateIcon})]})}),e.jsxs("div",{className:s.toggleSection,children:[e.jsxs("label",{htmlFor:"history",className:s.toggleLabel,children:[e.jsx("span",{className:s.toggleText,children:"Keep History"}),e.jsxs("span",{className:s.toggleWrapper,children:[e.jsx("span",{className:s.toggleTrack}),e.jsx("span",{className:l(s.toggleKnob,o.history&&s.active),children:e.jsx("input",{id:"history",name:"history",type:"checkbox",checked:o.history,onChange:r=>{_(t=>({...t,history:r.target.checked}))},className:s.toggleInput})})]})]}),e.jsxs("label",{htmlFor:"advanced",className:s.toggleLabel,children:[e.jsx("span",{className:s.toggleText,children:"Show Advanced Options"}),e.jsxs("span",{className:s.toggleWrapper,children:[e.jsx("span",{className:s.toggleTrack}),e.jsx("span",{className:l(s.toggleKnob,o.advanced&&s.active),children:e.jsx("input",{id:"advanced",name:"advanced",type:"checkbox",checked:o.advanced,onChange:r=>{_(t=>({...t,advanced:r.target.checked}))},className:s.toggleInput})})]})]}),e.jsx("div",{className:l(s.advancedSection,!o.advanced&&s.hidden),children:e.jsxs("div",{className:s.inputGroup,children:[e.jsx("label",{htmlFor:"host",className:s.label,children:"Custom Host"}),e.jsx("div",{className:s.inputWrapper,children:e.jsx("input",{id:"host",name:"host",type:"text",value:o.host,onChange:r=>{K(r.target.value.trim())},spellCheck:"false",className:l(s.input,!j(g.host)&&!g.host&&s.inputError)})}),e.jsx("span",{className:s.errorText,children:k.host})]})})]})]})}const qe="_optionsPage_1mbiq_1",Be="_optionsContainer_1mbiq_11",Ge="_loaderContainer_1mbiq_24",I={optionsPage:qe,optionsContainer:Be,loaderContainer:Ge};function He(){const i=T()[1],[p,c]=U();return d.useEffect(()=>{async function u(){var _;const{settings:a={}}=await q(),y=(a==null?void 0:a.advanced)||!1,f=y&&(a==null?void 0:a.host)&&E(a.host)&&{hostDomain:a.host.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0]||"",hostUrl:a.host.endsWith("/")?a.host.slice(0,-1):a.host}||N,o={apikey:((_=a==null?void 0:a.apikey)==null?void 0:_.trim())||"",history:(a==null?void 0:a.history)||!1,advanced:f.hostUrl.trim()!==N.hostUrl&&y,host:f};i({type:B.HYDRATE_EXTENSION_SETTINGS,payload:o}),c({type:G.SET_LOADING,payload:!1})}u()},[i,c]),e.jsx(e.Fragment,{children:e.jsx(D,{children:e.jsx("div",{id:"options",className:I.optionsPage,children:e.jsxs("div",{className:I.optionsContainer,children:[e.jsx(Y,{}),p.loading?e.jsx("div",{className:I.loaderContainer,children:e.jsx(V,{})}):e.jsx(Ve,{}),e.jsx(ue,{})]})})})})}const C=document.getElementById("options-root");if(!C)throw new Error("Could not find options-root container");const Oe=H.createRoot(C);Oe.render(e.jsx(d.StrictMode,{children:e.jsx(O,{children:e.jsx($,{children:e.jsx(He,{})})})}));
